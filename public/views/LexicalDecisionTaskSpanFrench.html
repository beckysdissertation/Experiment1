<!doctype html>
<html>
  <head>
    <title>My experiment</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-text.js"></script>
    <script src="jspsych/plugins/jspsych-single-stim.js"></script>
    <script src="jspsych/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych/plugins/jspsych-survey-multi-choice.js"></script>
    <link href="jspsych/css/jspsych.css" rel="stylesheet" type="text/css"></link>
<style>
.stimuli{
font-size:30px;
text-align:center;
font-family:verdana;
}
.stimuli2{
font-size:20px;
text-align:center;
font-family:verdana;
}

label.jspsych-survey-multi-choice-text input[type="radio"] {
margin-left: auto;
margin-right: auto;
display: block;
}

</style>
	
	</head>
<body>
</body>
<script>
function getRandomInt(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min)) + min;
}

  var consent={
  type: "text",
  text: "<p class='stimuli'>If you wish and agree to participate in this linguistics study, you will be asked to complete two short tasks, involving reaction time (in French) and picture selection (in English), followed by a short questionnaire. The total time to complete the study is estimated to be 15 minutes.</p>"+
  "<p class='stimuli'> By completing the study, you will have the chance to win one of three 20 pound book tokens.</p>"+
  "<p class='stimuli'> Participation in this study is voluntary. You may discontinue at any time for any reason, but a book token can only be won by completing the whole study.</p>"+
  "<p class='stimuli'>Each participant's documented consent to participate and corresponding data will remain confidential.</p>"+
  "<p class='stimuli2'>Please press SPACE to continue</p>"
  };
  var consent2={
  type:"survey-multi-choice",
  horizontal:true,
  questions:["<p class='stimuli'>Do you consent to taking part in this study?</p>",],
  options:[["<p class='stimuli2'> yes</p>", "<p class='stimuli2'>no</p>",]],
  };
var welcome_block={
type:"survey-text",
questions:["<p class='stimuli'>Bienvenue.</p>"+
"<p class='stimuli'>Avant de commencer, si vous êtes étudiant à <b>Cambridge</b>, veuillez insérer votre <b>CRSid</b>.</p>"+
"<p class='stimuli'>Si vous êtes étudiant dans une <b>autre</b> université, veuillez insérer le <b>nom</b> de votre université, suivi de vos <b>initiales</b>, par exemple <b>'SouthamptonBB'</b>.</p>",],
};
var welcome_block2={
type:"text",
text:"<p class='stimuli'>Cette expérience consiste en <b>deux courtes épreuves</b>, suivis d’un <b>petit questionnaire</b>.</p>"+
"<p class='stimuli'>Pendant la durée des épreuves, veuillez vous assurer que vous êtes dans un environnement <b>calme</b> et <b>sans distractions</b>.</p>"+ 
"<p class='stimuli2'>(Appuyez sur la touche <b>espace</b> pour commencer la première épreuve)</p>"
};
var instructions_block1={
type:"text",
text:"<p class='stimuli'>La durée de cette première épreuve sera 4 minutes environs.</p>"+
"<p class='stimuli'>Vous verrez des <b>séries de lettres</b>, les séries seront <b>séparées</b> par une <b>croix</b> ‘+’.</p>"+ 
"<p class='stimuli'>Essayez de <b>cligner des yeux</b> seulement lorsque vous voyez cette <b>croix</b>.</p>"+
"<p class='stimuli2'>(Appuyez sur la touche <b>espace</b> pour continuer)</p>"
};
var instructions_block2={
type:"text",
text:"<p class='stimuli'>Votre but est de décider si chacune de ces séries sont un <b>vrai mot</b> en <b>français</b>, ou <b>non</b>.</p>"+
"<p class='stimuli'>Ne vous inquiétez pas, ceci n’est pas un test d’orthographe ou de vocabulaire. Tous les mots français de cet exercice sont <b>relativement connus</b>.</p>"+ 
"<p class='stimuli'>Ce qui est <b>plus important</b> est la <b>rapidité</b> et <b>l’exactitude</b> des réponses. Essayez de prendre vos décisions le <b>plus rapidement</b> et <b>justement</b> possible.</p>"+
"<p class='stimuli2'>(Appuyez sur la touche <b>espace</b> pour continuer)</p>"
};
var instructions_block3={
type:"text",
text:"<p class='stimuli'>Placez vos doigts sur les touches <b>‘Z’</b> et <b>‘M’</b> du clavier.</p>"+
"<p class='stimuli'>Pendant l’exercice, lorsque vous voyez un <b>non-mot</b> (mot non français), appuyez sur la touche <b>‘Z’</b> et lorsque vous voyez un <b>vrai mot français</b>, appuyez sur la touche <b>‘M’</b>.</p>"+
"<p class='stimuli2'>(Appuyez sur la touche <b>'M'</b> pour continuer)</p>"
};
var instructions_block4={
type:"text",
text:"<p class='stimuli'>Pret? Appuyez sur la touche <b>‘M’</b> pour commencer.</p>"+
"<p class='stimuli'>Rappel: <b>Z</b> = <b>non mot</b> (main <b>gauche</b>), <b>M</b> = <b>vrai mot</b> (main <b>droite</b>)!</p>"
};

var words= [
// words
["poison",
"danger",
"cousin",
"nièce",
"dessert",
"engagement",
"portrait",
"queue",
"source",
"ticket",
"combat",
"concept",
"conclusion",
"crime",
"chèque",
"confusion",
"continent",
"division",
"invasion",
"laser",
"restaurant",
"talent",
"tension",
"transport",
"vision",
"volume",
"contact",
"métal",
"lapin",
"bouclier",
"fromage",
"tiroir",
"hiver",
"requin",
"bougie",
"poulet",
"pomme",
"feuille",
"sagesse",
"couteau",
"fenêtre",
"oiseau",
"déjeuner",
"foule",
"doigt",
"sortie",
"chapeau",
"bague",
"troupeau",
"devinette",
"coccinelle",
"brindille",
"grenouille",
"berceau",
"nettoyant",
"ficelle"],
//non-words
["avero",
"reure",
"vitin",
"irite",
"prenner",
"tousue",
"togue",
"glave",
"perda",
"salos",
"renda",
"marbe",
"vinus",
"viter",
"grine",
"patir",
"ponge",
"mension",
"charler",
"sorde",
"moble",
"internu",
"élane",
"aleté",
"êrait",
"épite",
"forpé",
"névale",
"éclatre",
"déraver",
"sulanté",
"loirasé",
"exalmières",
"sièveux",
"racriprès",
"repéfois",
"queltés",
"ivangé",
"insnité",
"facrétrer",
"trouliré",
"détemire",
"hômettes",
"séromigue",
"émais",
"érote",
"carée",
"reléte",
"têter",
"commète",
"marsées",
"pençant",
"granté",
"inferné",
"exacé",
"élame",
]
];
var fixation_trial={
type: 'single-stim',
stimulus: "<p class='stimuli'>+</p>",
is_html: true,
timing_response: 800,
timing_post_trial: 300,
choices: 'none'
};
var endofexperiment={
type:"text",
text:"<p class='stimuli'>Vous avez atteint la fin de l’épreuve 1.</p>"+
"<p class='stimuli'>Lorsque vous êtes prêt, taper sur une touche du clavier pour commencer la deuxième épreuve, qui sera en ANGLAIS.</p>"
};
var instructions_block5={
type:"text",
text:"<p class='stimuli'>This next experiment will take around 8 minutes.</p>"+
"<p class='stimuli'>You will see sets of 11 pictures, one picture at a time.</p>"+
"<p class='stimuli'>Across these 11 pictures, one image will gradually <b>transform</b> into another.</p>"+
"<p class='stimuli'> Press <b>SPACE</b> to see an example.<p>",
};
var example_block={
type:"single-stim",
stimulus:"img/Example.jpg",
};
var instructions_block6={
type:"text",
text: "<p class='stimuli'>The identity of the <b>first</b> picture in the set will be given to you, e.g. 'dog'.</p>"+
"<p class='stimuli'>Your job is to predict the <b>final</b> image that this picture is transforming into.</p>"+
"<p class='stimuli2'> (Press <b>SPACE</b> to continue)<p>",
};
var instructions_block7={
type:"text",
text:"<p class='stimuli'>After <b>each</b> of the pictures in the set, you'll be asked to predict the <b>final</b> image (i.e., what the pictures are gradually turning into).</p>"+
"<p class='stimuli'>On each trial, press <b>SPACE</b> for the picture to disappear and an answer box to pop up. Please write your answer as quickly as possible.</p>",
};
var instructions_block8={
type:"text",
text:"<p class='stimuli'>If initially you have no idea what the picture is turning into, you can leave the answer box <b>blank</b>.</p>"+
"<p class='stimuli'>Ready? Press <b>SPACE</b> to see the first picture and begin the task!</p>",
};
var apple1={
type: "single-stim",
stimulus: "img/apple1.jpg",
};
var apple2={
type:"single-stim",
stimulus:"img/apple2.jpg",
};
var apple2_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple3={
type:"single-stim",
stimulus:"img/apple3.jpg",
};
var apple3_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple4={
type:"single-stim",
stimulus:"img/apple4.jpg",
};
var apple4_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple5={
type:"single-stim",
stimulus:"img/apple5.jpg",
};
var apple5_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple6={
type:"single-stim",
stimulus:"img/apple6.jpg",
};
var apple6_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple7={
type:"single-stim",
stimulus:"img/apple7.jpg",
};
var apple7_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple8={
type:"single-stim",
stimulus:"img/apple8.jpg",
};
var apple8_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple9={
type:"single-stim",
stimulus:"img/apple9.jpg",
};
var apple9_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple10={
type:"single-stim",
stimulus:"img/apple10.jpg",
};
var apple10_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var apple_answer={
type:"text",
text:"<p class='stimuli'>Please press <b>SPACE</b> to find out the identity of the final image in this picture set.</p>"+
"<p class='stimuli'>Afterwards, press <b>SPACE</b> again to continue to the next set of pictures.</p>",
};
var apple11={
type:"single-stim",
stimulus:"img/apple11.jpg",
};
var horse1={
type:"single-stim",
stimulus:"img/horse1.jpg",
};
var horse2={
type:"single-stim",
stimulus:"img/horse2.jpg",
};
var horse2_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse3={
type:"single-stim",
stimulus:"img/horse3.jpg",
};
var horse3_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse4={
type:"single-stim",
stimulus:"img/horse4.jpg",
};
var horse4_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse5={
type:"single-stim",
stimulus:"img/horse5.jpg",
};
var horse5_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse6={
type:"single-stim",
stimulus:"img/horse6.jpg",
};
var horse6_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse7={
type:"single-stim",
stimulus:"img/horse7.jpg",
};
var horse7_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse8={
type:"single-stim",
stimulus:"img/horse8.jpg",
};
var horse8_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse9={
type:"single-stim",
stimulus:"img/horse9.jpg",
};
var horse9_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse10={
type:"single-stim",
stimulus:"img/horse10.jpg",
};
var horse10_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var horse_answer={
type:"text",
text:"<p class='stimuli'>Please press <b>SPACE</b> to find out the identity of the final image in this picture set.</p>"+
"<p class='stimuli'>Afterwards, press <b>SPACE</b> again to continue to the next set of pictures.</p>",
};
var horse11={
type:"single-stim",
stimulus:"img/horse11.jpg",
};
var body1={
type:"single-stim",
stimulus:"img/body1.jpg",
};
var body2={
type:"single-stim",
stimulus:"img/body2.jpg",
};
var body2_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body3={
type:"single-stim",
stimulus:"img/body3.jpg",
};
var body3_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body4={
type:"single-stim",
stimulus:"img/body4.jpg",
};
var body4_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body5={
type:"single-stim",
stimulus:"img/body5.jpg",
};
var body5_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body6={
type:"single-stim",
stimulus:"img/body6.jpg",
};
var body6_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body7={
type:"single-stim",
stimulus:"img/body7.jpg",
};
var body7_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body8={
type:"single-stim",
stimulus:"img/body8.jpg",
};
var body8_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body9={
type:"single-stim",
stimulus:"img/body9.jpg",
};
var body9_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body10={
type:"single-stim",
stimulus:"img/body10.jpg",
};
var body10_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var body_answer={
type:"text",
text:"<p class='stimuli'>Please press <b>SPACE</b> to find out the identity of the final image in this picture set.</p>"+
"<p class='stimuli'>Afterwards, press <b>SPACE</b> again to continue to the next set of pictures.</p>",
};
var body11={
type:"single-stim",
stimulus:"img/body11.jpg",
};
var lady1={
type:"single-stim",
stimulus:"img/lady1.jpg",
};
var lady2={
type:"single-stim",
stimulus:"img/lady2.jpg",
};
var lady2_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady3={
type:"single-stim",
stimulus:"img/lady3.jpg",
};
var lady3_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady4={
type:"single-stim",
stimulus:"img/lady4.jpg",
};
var lady4_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady5={
type:"single-stim",
stimulus:"img/lady5.jpg",
};
var lady5_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady6={
type:"single-stim",
stimulus:"img/lady6.jpg",
};
var lady6_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady7={
type:"single-stim",
stimulus:"img/lady7.jpg",
};
var lady7_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady8={
type:"single-stim",
stimulus:"img/lady8.jpg",
};
var lady8_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady9={
type:"single-stim",
stimulus:"img/lady9.jpg",
};
var lady9_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady10={
type:"single-stim",
stimulus:"img/lady10.jpg",
};
var lady10_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var lady_answer={
type:"text",
text:"<p class='stimuli'>Please press <b>SPACE</b> to find out the identity of the final image in this picture set.</p>"+
"<p class='stimuli'>Afterwards, press <b>SPACE</b> again to continue to the final set of pictures.</p>",
};
var lady11={
type:"single-stim",
stimulus:"img/lady11.jpg",
};
var squir1={
type:"single-stim",
stimulus:"img/squir1.jpg",
};
var squir2={
type:"single-stim",
stimulus:"img/squir2.jpg",
};
var squir2_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir3={
type:"single-stim",
stimulus:"img/squir3.jpg",
};
var squir3_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir4={
type:"single-stim",
stimulus:"img/squir4.jpg",
};
var squir4_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir5={
type:"single-stim",
stimulus:"img/squir5.jpg",
};
var squir5_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir6={
type:"single-stim",
stimulus:"img/squir6.jpg",
};
var squir6_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir7={
type:"single-stim",
stimulus:"img/squir7.jpg",
};
var squir7_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir8={
type:"single-stim",
stimulus:"img/squir8.jpg",
};
var squir8_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir9={
type:"single-stim",
stimulus:"img/squir9.jpg",
};
var squir9_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir10={
type:"single-stim",
stimulus:"img/squir10.jpg",
};
var squir10_response={
type:"survey-text",
questions:["<p class='stimuli'><b>What do you think this image is turning into?</b> If you are unsure at this stage, or if your answer is the <b>same</b> as it was for the <b>previous</b> image, please leave the box <b>blank</b> and click 'submit answers'.</p>",],
};
var squir_answer={
type:"text",
text:"<p class='stimuli'>Please press <b>SPACE</b> to find out the identity of the final image in this picture set.</p>"+
"<p class = 'stimuli'>Afterwards, press <b>SPACE</b> again to continue to the end of the experiment.</p>",
};
var squir11={
type:"single-stim",
stimulus:"img/squir11.jpg",
};
var endofexperiment2={
type:"text",
text:"<p class='stimuli'>You have reached the end of the experiment.</p>"+
"<p class='stimuli'>When you are ready, please press any key to move on to a final short questionnare.</p>",
 };
 var questionnaire1={
  type:"survey-multi-choice",
  horizontal: true,
  questions:["<p class='stimuli'>Which <b>variety of English</b> do you speak? </p>",],
  options:[["<p class='stimuli2'>British English</p>", "<p class='stimuli2'>American English</p>", "<p class='stimuli2'>Australian English</p>","<p class='stimuli2'>Indian English</p>","<p class='stimuli2'>Other</p>",]],
  };
  var questionnaire2={
 type: "survey-text",
 questions:["<p class='stimuli'>Do you speak any <b>other languages</b> apart from English, French and Spanish? If <b>no</b>, please write <b>'no'</b>. If <b>yes</b>, please <b>list</b> these languages and rate your <b>proficiency</b> in <b>each one</b>, on a scale of 1 to 5 - <b>1</b> being <b>'low'</b>, <b>3</b> being 'competent', and <b>5</b> being <b>'high'</b>. (e.g. Portuguese = 2, German = 1).</p>",],
 };
var questionnaire3={
type:"survey-multi-choice",
horizontal: true,
questions:["<p class='stimuli'>When did you start learning <b>French</b>?</p>",],
options:[["<p class='stimuli2'>From birth</p>", "<p class='stimuli2'>In primary school</p>", "<p class='stimuli2'>In secondary school</p>", "<p class='stimuli2'>Later</p>",]],
};
var questionnaire4={
type:"survey-multi-choice",
horizontal: true,
questions:["<p class='stimuli'>When did you start learning <b>Spanish</b>?</p>",],
options:[["<p class='stimuli2'>From birth</p>", "<p class='stimuli2'>In primary school</p>", "<p class='stimuli2'>In secondary school</p>", "<p class='stimuli2'>Later</p>",]],
};
var questionnaire5={
type:"survey-text",
questions:["<p class='stimuli'>How would you rate your <b>proficiency</b> in <b>French</b> and <b>Spanish</b>? Give each language a rating between 1 and 5, <b>1</b> being <b>'low'</b>, <b>3</b> being <b>'competent'</b>, and <b>5</b> being <b>'high'</b>.</p>",],
};
var questionnaire6={
type:"survey-multi-choice",
questions:["<p class='stimuli'>Have you had any language teaching in French or Spanish <b>outside</b> of school/university, e.g. at home or extracurricular classes?</p>",],
options:[["<p class='stimuli2'>Yes</p>","<p class='stimuli2'>No</p>",]],
};
var questionnaire7={
type:"survey-multi-choice",
questions:["<p class='stimuli'>How <b>frequently</b> are you <b>exposed</b> to <b>French</b> (hearing or reading)?</p>",],
options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very frequently</p>",]],
};
var questionnaire8={
type:"survey-multi-choice",
questions:["<p class='stimuli'>How <b>frequently</b> are you <b>exposed</b> to <b>Spanish</b> (hearing or reading)?</p>",],
options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very frequently</p>",]],
};
var questionnaire9={
type:"survey-multi-choice",
questions:["<p class='stimuli'>How <b>frequently</b> do you <b>use French</b> (speaking or writing)?</p>",],
options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very frequently</p>",]],
};
var questionnaire10={
type:"survey-multi-choice",
questions:["<p class='stimuli'>How <b>frequently</b> do you <b>use Spanish</b> (speaking or writing)?</p>",],
options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very frequently</p>",]],
};
var questionnaire11={
 type: "survey-multi-choice",
 horizontal: true,
 questions:["<p class='stimuli'>To which <b>age band</b> do you belong?</p>",],
 options:[["<p class='stimuli2'>Under 18</p>","<p class='stimuli2'>18-25</p>","<p class='stimuli2'>26-30</p>","<p class='stimuli2'>31-35</p>","<p class='stimuli2'>36+</p>",]],
 };
var questionnaire12={
type:"survey-multi-choice",
horizontal:true,
questions:["<p class='stimuli'>What <b>year</b> of <b>university</b> are you in?</p>",],
 options:[["<p class='stimuli2'>Completed undergraduate degree</p>","<p class='stimuli2'>Completed masters</p>","<p class='stimuli2'>Completed PhD</p>","<p class='stimuli2'>First year undergraduate</p>","<p class='stimuli2'>Second year undergraduate</p>","<p class='stimuli2'>Third year undergraduate</p>","<p class='stimuli2'>Fourth year undergraduate</p>","<p class='stimuli2'>Studying for Masters</p>","<p class='stimuli2'>Studying for PhD</p>","<p class='stimuli2'>Other</p>",]],
 };
var questionnaire13={
 type:"survey-multi-choice",
 horizontal:true,
 questions:["<p class='stimuli'>How would you rate your <b>vision</b>?</p>",],
 options:[["<p class='stimuli2'>Normal</p>","<p class='stimuli2'>Corrected-to-normal(wear glasses)</p>","<p class='stimuli2'>Some problems with vision</p>",]],
 };
 var questionnaire14={
 type:"survey-multi-choice",
 horizontal:true,
  questions:["<p class='stimuli'>What is your <b>sex</b>?</p>",],
 options:[["<p class='stimuli2'>Male</p>","<p class='stimuli2'>Female</p>","<p class='stimuli2'>Other</p>",]],
 };
 var questionnaire15={
 type:"survey-multi-choice",
 horizontal:true,
  questions:["<p class='stimuli'>Are you <b>left</b> or <b>right handed</b>?</p>",],
 options:[["<p class='stimuli2'>Left</p>","<p class='stimuli2'> Right </p>", "<p class='stimuli2'>Ambidextrous</p>",]],
 }
 var questionnaire16={
 type:"survey-multi-choice",
 horizontal:true,
 questions:["<p class='stimuli'>Do you play a <b>musical instrument</b>?</p>",],
 options:[["<p class='stimuli2'>Yes</p>","<p class='stimuli2'>No</p>",]],
 };
 var questionnaire17={
 type:"survey-multi-choice",
 horizontal:true,
questions:["<p class='stimuli'>How <b>often</b> do you play <b>video games</b>?</p>",],
 options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very often</p>",]],
 };
 var questionnaire18={
 type:"survey-multi-choice",
 horizontal:true,
  questions:["<p class=stimuli>How <b>often</b> do you take part in <b>sustained exercise</b>?</p>",],
 options:[["<p class='stimuli2'>Never</p>","<p class='stimuli2'>Rarely</p>","<p class='stimuli2'>Sometimes</p>","<p class='stimuli2'>Often</p>","<p class='stimuli2'>Very often</p>",]],
 };
 var endofexperiment3={
 type:"text",
  text:"<p class='stimuli'>This is the end of the experiment. Thank you very much for taking part.</p>"+
 "<p class='stimuli2'>Please press <b>space</b> to finish.</p>",
 }; 


var timeline=[];
timeline.push(consent);
timeline.push(consent2);
timeline.push(welcome_block);
timeline.push(welcome_block2);
timeline.push(instructions_block1);
timeline.push(instructions_block2);
timeline.push(instructions_block3);
timeline.push(instructions_block4);

// pseudo randomization of word order
var total = words.map(function(c){return c.length}).reduce(function(a,b){return a+b},0);
var last_n = [-1, -1,-1];
while(total > 0) {
 var i = getRandomInt(0, total);
 var bucket = 0;
 for (; i >= words[bucket].length; i -= words[bucket++].length);

 if (last_n.map(function(b) { return b == bucket }).reduce(function(a,b) { return a && b },true))
   continue;

 last_n.shift();
 last_n.push(bucket);

 var word = words[bucket].splice(i, 1)[0];
 if (words[bucket].length == 0)
   words.splice(bucket, 1);

 timeline.push({
 timeline: [ fixation_trial,
   {
   type: 'single-stim',
   stimulus: '<p class="stimuli">' + word + '</p>',
   timing_response: 5000,
   timing_post_trial: 700,
   is_html: true,
   }]
 });
 console.log(word);

 total = words.map(function(c){return c.length}).reduce(function(a,b){return a+b},0);
}

timeline.push(endofexperiment);
 timeline.push(instructions_block5);
 timeline.push(example_block);
 timeline.push(instructions_block6);
 timeline.push(instructions_block7);
 timeline.push(instructions_block8);
 timeline.push(apple1);
 timeline.push(apple2);
 timeline.push(apple2_response);
 timeline.push(apple3);
 timeline.push(apple3_response);
 timeline.push(apple4);
 timeline.push(apple4_response);
 timeline.push(apple5);
 timeline.push(apple5_response);
 timeline.push(apple6);
 timeline.push(apple6_response);
 timeline.push(apple7);
 timeline.push(apple7_response);
 timeline.push(apple8);
 timeline.push(apple8_response);
 timeline.push(apple9);
 timeline.push(apple9_response);
 timeline.push(apple10);
 timeline.push(apple10_response);
 timeline.push(apple_answer);
 timeline.push(apple11);
 timeline.push(horse1);
 timeline.push(horse2);
 timeline.push(horse2_response);
 timeline.push(horse3);
 timeline.push(horse3_response);
 timeline.push(horse4);
 timeline.push(horse4_response);
 timeline.push(horse5);
 timeline.push(horse5_response);
 timeline.push(horse6);
 timeline.push(horse6_response);
 timeline.push(horse7);
 timeline.push(horse7_response);
 timeline.push(horse8);
 timeline.push(horse8_response);
 timeline.push(horse9);
 timeline.push(horse9_response);
 timeline.push(horse10);
 timeline.push(horse10_response);
 timeline.push(horse_answer);
 timeline.push(horse11);
 timeline.push(body1);
 timeline.push(body2);
 timeline.push(body2_response);
 timeline.push(body3);
 timeline.push(body3_response);
 timeline.push(body4);
 timeline.push(body4_response);
 timeline.push(body5);
 timeline.push(body5_response);
 timeline.push(body6);
 timeline.push(body6_response);
 timeline.push(body7);
 timeline.push(body7_response);
 timeline.push(body8);
 timeline.push(body8_response);
 timeline.push(body9);
 timeline.push(body9_response);
 timeline.push(body10);
 timeline.push(body10_response);
 timeline.push(body_answer);
 timeline.push(body11);
 timeline.push(lady1);
 timeline.push(lady2);
 timeline.push(lady2_response);
 timeline.push(lady3);
 timeline.push(lady3_response);
 timeline.push(lady4);
 timeline.push(lady4_response);
 timeline.push(lady5);
 timeline.push(lady5_response);
 timeline.push(lady6);
 timeline.push(lady6_response);
 timeline.push(lady7);
 timeline.push(lady7_response);
 timeline.push(lady8);
 timeline.push(lady8_response);
 timeline.push(lady9);
 timeline.push(lady9_response);
 timeline.push(lady10);
 timeline.push(lady10_response);
 timeline.push(lady_answer);
 timeline.push(lady11);
 timeline.push(squir1);
 timeline.push(squir2);
 timeline.push(squir2_response);
 timeline.push(squir3);
 timeline.push(squir3_response);
 timeline.push(squir4);
 timeline.push(squir4_response);
 timeline.push(squir5);
 timeline.push(squir5_response);
 timeline.push(squir6);
 timeline.push(squir6_response);
 timeline.push(squir7);
 timeline.push(squir7_response);
 timeline.push(squir8);
 timeline.push(squir8_response);
 timeline.push(squir9);
 timeline.push(squir9_response);
 timeline.push(squir10);
 timeline.push(squir10_response);
 timeline.push(squir_answer);
 timeline.push(squir11);
 timeline.push(endofexperiment2);
 timeline.push(questionnaire1);
 timeline.push(questionnaire2);
 timeline.push(questionnaire3);
 timeline.push(questionnaire4);
 timeline.push(questionnaire5);
 timeline.push(questionnaire6);
 timeline.push(questionnaire7);
 timeline.push(questionnaire8);
 timeline.push(questionnaire9);
 timeline.push(questionnaire10);
 timeline.push(questionnaire11);
 timeline.push(questionnaire12);
 timeline.push(questionnaire13);
 timeline.push(questionnaire14);
 timeline.push(questionnaire15);
 timeline.push(questionnaire16);
 timeline.push(questionnaire17);
 timeline.push(questionnaire18);
 timeline.push(endofexperiment3);

jsPsych.init({
timeline:timeline,
 on_finish: function() {
    $.ajax({
      type: "POST",
      url: "/experiment-data",
      data: JSON.stringify(jsPsych.data.getData()),
      contentType: "application/json"
    })
    .done(function() {
      window.location.href = "/finish";
    })
    .fail(function() {
      alert("A problem occurred while writing to the database. Please contact the researcher for more information.")
      window.location.href = "/";
    })
  }
});
</script>
</html>
